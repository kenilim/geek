<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CircuitFit Prototype</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            background-color: #f0f0f0;
        }
        .container {
            text-align: center;
            background-color: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        #timer, #repCount, #calorieCount, #heartRate {
            font-size: 48px;
            margin: 20px 0;
        }
        #exercise {
            font-size: 24px;
            margin-bottom: 20px;
        }
        button {
            font-size: 18px;
            padding: 10px 20px;
            margin: 5px;
            cursor: pointer;
        }
        select, input {
            font-size: 16px;
            margin: 5px;
            padding: 5px;
        }
        #setup, #workout {
            display: none;
        }
        #setup.active, #workout.active {
            display: block;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>CircuitFit</h1>
        <div id="setup" class="active">
            <h2>Workout Setup</h2>
            <select id="exerciseSelect">
                <option value="custom">Custom Exercise</option>
                <option value="Jumping Jacks">Jumping Jacks</option>
                <option value="Wall Sit">Wall Sit</option>
                <option value="Push-ups">Push-ups</option>
                <option value="Crunches">Crunches</option>
                <option value="Step-ups">Step-ups</option>
                <option value="Squats">Squats</option>
                <option value="Tricep Dips">Tricep Dips</option>
                <option value="Plank">Plank</option>
                <option value="High Knees">High Knees (Running in Place)</option>
                <option value="Lunges">Lunges</option>
                <option value="Push-ups with Rotation">Push-ups with Rotation</option>
                <option value="Side Plank">Side Plank</option>
                <option value="Burpees">Burpees</option>
                <option value="Mountain Climbers">Mountain Climbers</option>
            </select>
            <input type="text" id="customExercise" placeholder="Custom Exercise Name" style="display: none;">
            <select id="workoutType">
                <option value="time">Time-based</option>
                <option value="amrap">AMRAP</option>
                <option value="repCount">Rep Count</option>
                <option value="calories">Calorie Target</option>
                <option value="heartRate">Heart Rate Zone</option>
            </select>
            <input type="number" id="durationInput" placeholder="Duration (seconds)" min="1">
            <input type="number" id="repCountInput" placeholder="Target Reps" min="1" style="display: none;">
            <input type="number" id="calorieInput" placeholder="Calorie Target" min="1" style="display: none;">
            <input type="number" id="heartRateInput" placeholder="Target Heart Rate" min="1" style="display: none;">
            <button id="addExercise">Add Exercise</button>
            <div id="exerciseList"></div>
            <input type="number" id="restDuration" placeholder="Rest Duration (seconds)" min="0" value="15">
            <button id="startWorkout">Start Workout</button>
        </div>
        <div id="workout">
            <div id="exercise">Press Start to begin workout</div>
            <div id="timer">00:00</div>
            <div id="repCount" style="display: none;">0</div>
            <div id="calorieCount" style="display: none;">0</div>
            <div id="heartRate" style="display: none;">0</div>
            <button id="startBtn">Start</button>
            <button id="pauseBtn">Pause</button>
            <button id="nextBtn">Next Exercise</button>
            <button id="resetBtn">Reset</button>
            <input type="number" id="updateCalorie" placeholder="Update Calories" style="display: none;">
            <input type="number" id="updateHeartRate" placeholder="Update Heart Rate" style="display: none;">
            <button id="updateBtn" style="display: none;">Update</button>
        </div>
    </div>

    <script>
        const setupDiv = document.getElementById('setup');
        const workoutDiv = document.getElementById('workout');
        const exerciseSelect = document.getElementById('exerciseSelect');
        const customExercise = document.getElementById('customExercise');
        const workoutType = document.getElementById('workoutType');
        const durationInput = document.getElementById('durationInput');
        const repCountInput = document.getElementById('repCountInput');
        const calorieInput = document.getElementById('calorieInput');
        const heartRateInput = document.getElementById('heartRateInput');
        const addExerciseBtn = document.getElementById('addExercise');
        const exerciseList = document.getElementById('exerciseList');
        const restDuration = document.getElementById('restDuration');
        const startWorkoutBtn = document.getElementById('startWorkout');
        const timer = document.getElementById('timer');
        const repCountDisplay = document.getElementById('repCount');
        const calorieCountDisplay = document.getElementById('calorieCount');
        const heartRateDisplay = document.getElementById('heartRate');
        const exerciseDisplay = document.getElementById('exercise');
        const startBtn = document.getElementById('startBtn');
        const pauseBtn = document.getElementById('pauseBtn');
        const nextBtn = document.getElementById('nextBtn');
        const resetBtn = document.getElementById('resetBtn');
        const updateCalorie = document.getElementById('updateCalorie');
        const updateHeartRate = document.getElementById('updateHeartRate');
        const updateBtn = document.getElementById('updateBtn');

        let interval;
        let timeLeft = 0;
        let currentReps = 0;
        let targetReps = 0;
        let currentCalories = 0;
        let targetCalories = 0;
        let currentHeartRate = 0;
        let targetHeartRate = 0;
        let isPaused = false;
        let currentExercise = 0;
        let exercises = [];
        let isResting = false;

        function updateTimer() {
            let minutes = Math.floor(timeLeft / 60);
            let seconds = timeLeft % 60;
            timer.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }

        function startTimer() {
            if (!interval) {
                interval = setInterval(() => {
                    if (!isPaused) {
                        if (timeLeft > 0) {
                            timeLeft--;
                            updateTimer();
                        } else {
                            if (isResting) {
                                isResting = false;
                                nextExercise();
                            } else {
                                startRest();
                            }
                        }
                    }
                }, 1000);
            }
        }

        function startRest() {
            isResting = true;
            timeLeft = parseInt(restDuration.value) || 15;
            exerciseDisplay.textContent = "Rest";
            updateTimer();
        }

        function nextExercise() {
            currentExercise++;
            if (currentExercise < exercises.length) {
                setupExercise();
            } else {
                endWorkout();
            }
        }

        function setupExercise() {
            const exercise = exercises[currentExercise];
            exerciseDisplay.textContent = exercise.name;
            timer.style.display = 'none';
            repCountDisplay.style.display = 'none';
            calorieCountDisplay.style.display = 'none';
            heartRateDisplay.style.display = 'none';
            updateCalorie.style.display = 'none';
            updateHeartRate.style.display = 'none';
            updateBtn.style.display = 'none';

            switch (exercise.type) {
                case 'time':
                case 'amrap':
                    timeLeft = exercise.duration;
                    updateTimer();
                    timer.style.display = 'block';
                    break;
                case 'repCount':
                    targetReps = exercise.repCount;
                    currentReps = 0;
                    repCountDisplay.textContent = `${currentReps} / ${targetReps}`;
                    repCountDisplay.style.display = 'block';
                    break;
                case 'calories':
                    targetCalories = exercise.calories;
                    currentCalories = 0;
                    calorieCountDisplay.textContent = `${currentCalories} / ${targetCalories}`;
                    calorieCountDisplay.style.display = 'block';
                    updateCalorie.style.display = 'inline';
                    updateBtn.style.display = 'inline';
                    break;
                case 'heartRate':
                    targetHeartRate = exercise.heartRate;
                    currentHeartRate = 0;
                    heartRateDisplay.textContent = `${currentHeartRate} / ${targetHeartRate}`;
                    heartRateDisplay.style.display = 'block';
                    updateHeartRate.style.display = 'inline';
                    updateBtn.style.display = 'inline';
                    break;
            }
        }

        function endWorkout() {
            clearInterval(interval);
            interval = null;
            exerciseDisplay.textContent = "Workout Complete!";
            timer.style.display = 'none';
            repCountDisplay.style.display = 'none';
            calorieCountDisplay.style.display = 'none';
            heartRateDisplay.style.display = 'none';
            updateCalorie.style.display = 'none';
            updateHeartRate.style.display = 'none';
            updateBtn.style.display = 'none';
        }

        addExerciseBtn.addEventListener('click', () => {
            const exerciseName = exerciseSelect.value === 'custom' ? customExercise.value : exerciseSelect.value;
            if (!exerciseName) {
                alert('Please select an exercise or enter a custom exercise name.');
                return;
            }
            const exercise = {
                name: exerciseName,
                type: workoutType.value,
                duration: parseInt(durationInput.value) || 30,
                repCount: parseInt(repCountInput.value) || 10,
                calories: parseInt(calorieInput.value) || 50,
                heartRate: parseInt(heartRateInput.value) || 120
            };
            exercises.push(exercise);
            exerciseList.innerHTML += `<div>${exercise.name} - ${exercise.type} - ${getExerciseDetails(exercise)}</div>`;
        });

        function getExerciseDetails(exercise) {
            switch (exercise.type) {
                case 'time':
                case 'amrap':
                    return `${exercise.duration} seconds`;
                case 'repCount':
                    return `${exercise.repCount} reps`;
                case 'calories':
                    return `${exercise.calories} calories`;
                case 'heartRate':
                    return `${exercise.heartRate} bpm`;
                default:
                    return '';
            }
        }

        startWorkoutBtn.addEventListener('click', () => {
            if (exercises.length > 0) {
                setupDiv.classList.remove('active');
                workoutDiv.classList.add('active');
                currentExercise = -1;
                nextExercise();
            } else {
                alert('Please add at least one exercise to your workout.');
            }
        });

        startBtn.addEventListener('click', () => {
            if (!interval) {
                startTimer();
            }
        });

        pauseBtn.addEventListener('click', () => {
            isPaused = !isPaused;
            pauseBtn.textContent = isPaused ? "Resume" : "Pause";
        });

        nextBtn.addEventListener('click', () => {
            if (isResting) {
                isResting = false;
                nextExercise();
            } else {
                startRest();
            }
        });

        resetBtn.addEventListener('click', () => {
            clearInterval(interval);
            interval = null;
            isPaused = false;
            currentExercise = -1;
            exercises = [];
            exerciseList.innerHTML = '';
            setupDiv.classList.add('active');
            workoutDiv.classList.remove('active');
            pauseBtn.textContent = "Pause";
        });

        updateBtn.addEventListener('click', () => {
            const exercise = exercises[currentExercise];
            if (exercise.type === 'calories') {
                currentCalories = parseInt(updateCalorie.value) || currentCalories;
                calorieCountDisplay.textContent = `${currentCalories} / ${targetCalories}`;
                if (currentCalories >= targetCalories) {
                    startRest();
                }
            } else if (exercise.type === 'heartRate') {
                currentHeartRate = parseInt(updateHeartRate.value) || currentHeartRate;
                heartRateDisplay.textContent = `${currentHeartRate} / ${targetHeartRate}`;
            }
        });

        workoutType.addEventListener('change', () => {
            durationInput.style.display = ['time', 'amrap'].includes(workoutType.value) ? 'inline' : 'none';
            repCountInput.style.display = workoutType.value === 'repCount' ? 'inline' : 'none';
            calorieInput.style.display = workoutType.value === 'calories' ? 'inline' : 'none';
            heartRateInput.style.display = workoutType.value === 'heartRate' ? 'inline' : 'none';
        });

        exerciseSelect.addEventListener('change', () => {
            customExercise.style.display = exerciseSelect.value === 'custom' ? 'inline' : 'none';
        });
    </script>
</body>
</html>